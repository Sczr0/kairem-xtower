:root {
	/*
		全局主题 Token（明暗通用）
		说明：优先通过 CSS 变量实现主题切换，避免把颜色写死在组件里。
	*/

	--mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
	--sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
		"Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji";

	--radius-sm: 10px;
	--radius-md: 12px;
	--radius-lg: 14px;
	--radius-xl: 18px;

	--danger: #ef4444;
	--success: #16a34a;

	/* 功能色（棋盘/规则）：浅色主题可用更“实色”的色值 */
	--c-red: #ef4444;
	--c-blue: #3b82f6;
	--c-black: #0f172a;
	--c-green: #22c55e;
	--c-yellow: #eab308;
	--c-purple: #a855f7;
	--c-white: #f8fafc;
	--c-orange: #f97316;
	--c-cyan: #06b6d4;
	--c-unknown: #94a3b8;

	/* 错误提示（高对比）：用于“冲突原因”等需要强可读性的区域 */
	--danger-surface: #fff1f2;
	--danger-border: #fecdd3;
	--danger-text: #9f1239;
	--danger-meta: #881337;

	/* Tooltip/Toast：统一深色反差，提升可读性（不随主题反转更稳定） */
	--tooltip-bg: #0b0c10;
	--tooltip-text: rgba(255, 255, 255, 0.94);
	--tooltip-border: rgba(255, 255, 255, 0.14);

	/* 默认（无 data-theme 时）走浅色 */
	color-scheme: light;

	--bg: #f7f7fb;
	--bg-2: #eef2f7;

	--text: rgba(15, 23, 42, 0.94);
	--muted: rgba(15, 23, 42, 0.7);
	--muted-2: rgba(15, 23, 42, 0.55);

	--panel: #ffffff;
	--panel-2: #fbfcfe;
	--panel-hover: #f3f4f6;

	--border: rgba(15, 23, 42, 0.12);
	--border-2: rgba(15, 23, 42, 0.18);

	/* 阴影：参考 UIUX.png 的“轻量卡片化” */
	--shadow-panel: 0 16px 40px rgba(15, 23, 42, 0.08);
	--shadow-soft: 0 1px 2px rgba(15, 23, 42, 0.06), 0 8px 20px rgba(15, 23, 42, 0.04);
	--shadow-chip: 0 1px 2px rgba(15, 23, 42, 0.06);
	--inset-highlight: 0 1px 0 rgba(255, 255, 255, 0.75) inset;
	--inset-shadow: 0 -1px 0 rgba(15, 23, 42, 0.06) inset;

	--primary: #0b0c10;
	--primary-hover: #14151c;
	--primary-contrast: #ffffff;

	--focus-ring: 0 0 0 3px rgba(59, 130, 246, 0.35);
}

:root[data-theme='dark'] {
	color-scheme: dark;

	/* 暗色主题：提升对比与层级（背景/面板/描边不要过于接近） */
	--bg: #121212;
	/* inset / 托盘（比卡片略暗，制造“内凹层级”） */
	--bg-2: #242424;

	--text: rgba(248, 250, 252, 0.94);
	--muted: rgba(248, 250, 252, 0.72);
	--muted-2: rgba(248, 250, 252, 0.56);

	/* 卡片/格子（比背景更亮，用明度差建立层级，避免接近纯黑导致眩光） */
	--panel: #2d2d2d;
	--panel-2: #2a2a2a;
	--panel-hover: #353535;

	--border: rgba(255, 255, 255, 0.12);
	--border-2: rgba(255, 255, 255, 0.2);

	--shadow-panel: 0 16px 40px rgba(0, 0, 0, 0.45);
	--shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.55), 0 12px 32px rgba(0, 0, 0, 0.35);
	--shadow-chip: 0 1px 2px rgba(0, 0, 0, 0.28);
	--inset-highlight: 0 1px 0 rgba(255, 255, 255, 0.06) inset;
	--inset-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4) inset;

	/* 暗色下的语义色与功能色：统一调亮（更“荧光/粉彩”以提升可读性） */
	--danger: #f87171;
	--success: #4ade80;
	--c-red: #fb7185;
	--c-blue: #60a5fa;
	--c-black: #475569;
	--c-green: #4ade80;
	--c-yellow: #facc15;
	--c-purple: #c084fc;
	--c-white: #f8fafc;
	--c-orange: #fb923c;
	--c-cyan: #22d3ee;
	--c-unknown: #94a3b8;

	/* 暗色错误提示：更接近黑的红底 + 高亮文字，避免“深红底 + 灰字”吃力 */
	--danger-surface: #1b0b0f;
	--danger-border: rgba(248, 113, 113, 0.55);
	--danger-text: rgba(255, 255, 255, 0.94);
	--danger-meta: rgba(255, 255, 255, 0.78);

	/* 暗色下主按钮反相，保持对比与“黑白极简”风格 */
	--primary: #f8fafc;
	--primary-hover: #ffffff;
	--primary-contrast: #0b0c10;

	--focus-ring: 0 0 0 3px rgba(147, 197, 253, 0.32);
}

@media (prefers-color-scheme: dark) {
	:root:not([data-theme]) {
		color-scheme: dark;
		--bg: #121212;
		--bg-2: #242424;
		--text: rgba(248, 250, 252, 0.94);
		--muted: rgba(248, 250, 252, 0.72);
		--muted-2: rgba(248, 250, 252, 0.56);
		--panel: #2d2d2d;
		--panel-2: #2a2a2a;
		--panel-hover: #353535;
		--border: rgba(255, 255, 255, 0.12);
		--border-2: rgba(255, 255, 255, 0.2);
		--shadow-panel: 0 16px 40px rgba(0, 0, 0, 0.45);
		--shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.55), 0 12px 32px rgba(0, 0, 0, 0.35);
		--shadow-chip: 0 1px 2px rgba(0, 0, 0, 0.28);
		--inset-highlight: 0 1px 0 rgba(255, 255, 255, 0.06) inset;
		--inset-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4) inset;
		--danger: #f87171;
		--success: #4ade80;
		--c-red: #fb7185;
		--c-blue: #60a5fa;
		--c-black: #475569;
		--c-green: #4ade80;
		--c-yellow: #facc15;
		--c-purple: #c084fc;
		--c-white: #f8fafc;
		--c-orange: #fb923c;
		--c-cyan: #22d3ee;
		--c-unknown: #94a3b8;
		--danger-surface: #1b0b0f;
		--danger-border: rgba(248, 113, 113, 0.55);
		--danger-text: rgba(255, 255, 255, 0.94);
		--danger-meta: rgba(255, 255, 255, 0.78);
		--primary: #f8fafc;
		--primary-hover: #ffffff;
		--primary-contrast: #0b0c10;
		--focus-ring: 0 0 0 3px rgba(147, 197, 253, 0.32);
	}
}

*,
*::before,
*::after {
	box-sizing: border-box;
}

html,
body {
	height: 100%;
}

body {
	margin: 0;
	font-family: var(--sans);
	color: var(--text);
	background: var(--bg);
	transition: background-color 180ms ease, color 180ms ease;
}

a {
	color: inherit;
	text-decoration: none;
}

.main {
	min-height: 100vh;
	padding: 28px 20px 56px;
}

:where(a, button, input, select, textarea):focus-visible {
	outline: none;
	box-shadow: var(--focus-ring);
}

/* 基础组件：卡片 / 按钮 / 输入框 */
.card {
	background: var(--panel);
	border: 1px solid var(--border);
	border-radius: var(--radius-xl);
	box-shadow: var(--shadow-soft);
}

.btn {
	appearance: none;
	border: 1px solid var(--border);
	background: var(--panel);
	color: var(--text);
	padding: 8px 14px;
	border-radius: var(--radius-sm);
	font-size: 0.92rem;
	font-weight: 650;
	cursor: pointer;
	box-shadow: var(--inset-highlight);
	transition:
		background-color 140ms ease,
		border-color 140ms ease,
		transform 80ms ease,
		box-shadow 140ms ease;
}

.btn:hover:not(:disabled) {
	background: var(--panel-hover);
	border-color: var(--border-2);
}

.btn:active:not(:disabled) {
	transform: translateY(1px);
}

.btn:disabled {
	opacity: 0.55;
	cursor: not-allowed;
}

.btn-primary {
	background: var(--primary);
	color: var(--primary-contrast);
	border-color: color-mix(in srgb, var(--primary) 45%, var(--border));
	box-shadow: none;
}

.btn-primary:hover:not(:disabled) {
	background: var(--primary-hover);
	border-color: color-mix(in srgb, var(--primary-hover) 45%, var(--border));
}

.btn-ghost {
	background: transparent;
	border-color: transparent;
	color: var(--muted);
	box-shadow: none;
}

.btn-ghost:hover:not(:disabled) {
	background: var(--panel-hover);
	border-color: transparent;
}

.input {
	width: 100%;
	padding: 10px 10px;
	border: 1px solid var(--border);
	border-radius: var(--radius-sm);
	background: var(--panel);
	color: var(--text);
	font-family: var(--mono);
}

.input:focus-visible {
	border-color: var(--border-2);
}

@media (prefers-reduced-motion: reduce) {
	* {
		transition: none !important;
	}
}
